{"version":3,"sources":["webpack:///./src/assets/imgs/demand/winImg.png","webpack:///./src/views/demand/ChooseDetails.vue?a100","webpack:///./src/assets/imgs/demand/arrow.png","webpack:///./src/views/demand/ChooseDetails.vue?65d5","webpack:///src/views/demand/ChooseDetails.vue","webpack:///./src/views/demand/ChooseDetails.vue?9f51","webpack:///./src/views/demand/ChooseDetails.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","staticStyle","on","$event","sortFlag","_s","_f","sortBy","directives","name","rawName","value","expression","_l","item","key","id","class","active","val","selectClassfiy","toEndTimeFlag","billInfo","bill_status","faliBid","_e","bill_no","amount","pkid","total_price","money_type","publish_date","give_recv_user_list","length","index","style","minWidth","singleList","currentPage","pageSize","recv_user","dept_name","getSlavList","deliver_date","split","descp","f_valid","chooseToWin","f_win_bid","give_price_list","total","getListDate","staticRenderFns","data","sortItem","slav_list","classifyList","recvPkid","tableTitleContrast","methods","$confirm","confirmButtonText","cancelButtonText","type","checkList","sessionStorage","setItem","JSON","stringify","path","query","window","open","routeData","href","recv_user_pkid","getTimeStatus","nowDate","endDate","$alert","callback","action","deptName","Number","page","bill_pkid","pageIndex","sort_way","res","code","changeListData","getBillInfo","components","Paging","created","$router","history","current","filters","sortNameFormat","watch","computed","component"],"mappings":"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","file":"js/chunk-6a9d4cf9.5f32de6b.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/winImg.cba78bee.png\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseDetails.vue?vue&type=style&index=0&id=4a04de47&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseDetails.vue?vue&type=style&index=0&id=4a04de47&lang=less&scoped=true&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAAk0lEQVQYV2NMyqufysDIkMWAH0xjDA0NZeaV1NrBwMjgglXtf4Y99y4xejKCJBMKGgSY/jOcYGD4r46i+D/DrX9MjOYLJjR8ACsEgbjsejUW5v8nGBgZBcEC//+/Z/7LaDF7auMtEBeuEMRJzqtz/s/IuAOs8N9fz3mTW/bADEJRCBJMLKjLZPrPxDh3YsM0ZGcAAGFyKfDeCywQAAAAAElFTkSuQmCC\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"choose-details\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"back-btn\"},[_c('router-link',{attrs:{\"to\":\"/demand\"}},[_vm._v(\"\\n        返回\\n      \")])],1),_c('div',{staticClass:\"sort\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticClass:\"sort-btn\",on:{\"click\":function($event){_vm.sortFlag = !_vm.sortFlag}}},[_c('span',[_vm._v(\"排序：\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"sortNameFormat\")(_vm.sortBy)))]),_c('img',{attrs:{\"src\":require(\"../../assets/imgs/demand/arrow.png\"),\"alt\":\"\"}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sortFlag),expression:\"sortFlag\"}],staticClass:\"classify-list\"},_vm._l((_vm.classifyList),function(item){return _c('span',{key:item.id,class:{ active: _vm.sortBy == item.val },on:{\"click\":function($event){return _vm.selectClassfiy(item.val)}}},[_vm._v(_vm._s(item.name))])}),0),(_vm.toEndTimeFlag && _vm.billInfo.bill_status === '1')?_c('button',{staticClass:\"fail-btn\",on:{\"click\":_vm.faliBid}},[_vm._v(\"\\n        棄標\\n      \")]):_vm._e()])]),(_vm.billInfo)?_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"tit-text\"},[_vm._v(\"\\n      【模具】需求單號\"+_vm._s(_vm.billInfo.bill_no)+\" 需求量:\"+_vm._s(_vm.billInfo.amount)+\"\\n      \"),_c('router-link',{staticClass:\"title_btn\",attrs:{\"to\":'/particulars?pkid=' + _vm.pkid}},[_vm._v(\"\\n        詳情\\n      \")])],1),_c('div',{staticClass:\"tit-info\"},[_vm._v(\"\\n      我的報價: \"+_vm._s(_vm.billInfo.total_price)+\" \"+_vm._s(_vm.billInfo.money_type)+\"\\n    \")]),_c('div',{staticClass:\"tit-info\"},[_vm._v(\"發佈時間: \"+_vm._s(_vm.billInfo.publish_date))]),_c('div',{staticClass:\"tit-unit\"},[_vm._v(\"\\n      當前項目投標單位數\\n      \"),_c('span',[_vm._v(\"\\n        \"+_vm._s(_vm.billInfo.give_recv_user_list\n            ? _vm.billInfo.give_recv_user_list.length\n            : 0)+\"\\n      \")])])]):_vm._e(),(_vm.give_price_list)?_c('table',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\",\"border-collapse\":\"collapse\"}},[_c('tr',_vm._l((_vm.tableTitleContrast),function(item,index){return _c('th',{key:index + item,style:({ minWidth: item.minWidth })},[_vm._v(\"\\n        \"+_vm._s(item.name)+\"\\n      \")])}),0),_vm._l((_vm.give_price_list),function(singleList,index){return _c('tr',{key:singleList.pkid},[_c('td',[_vm._v(_vm._s(index + 1 + (_vm.currentPage - 1) * _vm.pageSize))]),_c('td',[_c('router-link',{staticStyle:{\"color\":\"#0096ff\"},attrs:{\"to\":'/merchant/information?pkid=' + singleList.recv_user.pkid}},[_vm._v(\"\\n          \"+_vm._s(singleList.recv_user.dept_name)+\"\\n        \")])],1),_c('td',[_vm._v(_vm._s(singleList.total_price * _vm.billInfo.amount))]),_c('td',[_c('div',{staticClass:\"detail-list\"},[_c('span',[_vm._v(_vm._s(singleList.total_price))]),_c('div',{staticClass:\"show-list\",on:{\"click\":function($event){return _vm.getSlavList(singleList)}}},[_vm._v(\"\\n            標書\\n          \")])])]),_c('td',[_vm._v(_vm._s(singleList.deliver_date.split(\" \")[0]))]),_c('td',[_vm._v(_vm._s(singleList.descp))]),(_vm.billInfo.bill_status === '1' && singleList.f_valid === 'Y')?_c('td',{class:_vm.toEndTimeFlag ? 'choose-win' : 'choose-win-disabled',on:{\"click\":function($event){return _vm.chooseToWin(\n            singleList.pkid,\n            singleList.recv_user.dept_name,\n            singleList.f_valid\n          )}}},[_vm._v(\"\\n        选为中标\\n      \")]):(_vm.billInfo.bill_status === '1' && singleList.f_valid === 'N')?_c('td',[_vm._v(\"\\n        報價過高\\n      \")]):_c('td',[(singleList.f_win_bid === 'Y')?_c('img',{attrs:{\"src\":require(\"../../assets/imgs/demand/winImg.png\"),\"alt\":\"\"}}):_vm._e()])])}),(_vm.give_price_list.length == 0)?_c('tr',[_c('td',{attrs:{\"colspan\":\"7\"}},[_vm._v(\"暫無數據\")])]):_vm._e()],2):_vm._e(),_c('Paging',{attrs:{\"total\":_vm.total,\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize},on:{\"getCurrentPage\":_vm.getListDate}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"choose-details\">\r\n    <div class=\"top\">\r\n      <div class=\"back-btn\">\r\n        <router-link to=\"/demand\">\r\n          返回\r\n        </router-link>\r\n      </div>\r\n      <!-- 排序 -->\r\n      <div class=\"sort\" style=\"position:relative\">\r\n        <!-- 展示按鈕 -->\r\n        <div class=\"sort-btn\" @click=\"sortFlag = !sortFlag\">\r\n          <span>排序：</span>\r\n          <span>{{ sortBy | sortNameFormat }}</span>\r\n          <img src=\"../../assets/imgs/demand/arrow.png\" alt />\r\n        </div>\r\n        <div class=\"classify-list\" v-show=\"sortFlag\">\r\n          <span\r\n            v-for=\"item in classifyList\"\r\n            :key=\"item.id\"\r\n            :class=\"{ active: sortBy == item.val }\"\r\n            @click=\"selectClassfiy(item.val)\"\r\n            >{{ item.name }}</span\r\n          >\r\n        </div>\r\n        <button\r\n          v-if=\"toEndTimeFlag && billInfo.bill_status === '1'\"\r\n          class=\"fail-btn\"\r\n          @click=\"faliBid\"\r\n        >\r\n          棄標\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <!-- 標題 -->\r\n    <div class=\"title\" v-if=\"billInfo\">\r\n      <div class=\"tit-text\">\r\n        【模具】需求單號{{ billInfo.bill_no }}&nbsp;需求量:{{ billInfo.amount }}\r\n        <router-link :to=\"'/particulars?pkid=' + pkid\" class=\"title_btn\">\r\n          詳情\r\n        </router-link>\r\n      </div>\r\n      <div class=\"tit-info\">\r\n        我的報價: {{ billInfo.total_price }}&nbsp;{{ billInfo.money_type }}\r\n      </div>\r\n      <div class=\"tit-info\">發佈時間: {{ billInfo.publish_date }}</div>\r\n      <div class=\"tit-unit\">\r\n        當前項目投標單位數\r\n        <span>\r\n          {{\r\n            billInfo.give_recv_user_list\r\n              ? billInfo.give_recv_user_list.length\r\n              : 0\r\n          }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <!-- 表格信息 -->\r\n    <table\r\n      style=\"width:100%; text-align:center; border-collapse:collapse;\"\r\n      v-if=\"give_price_list\"\r\n    >\r\n      <tr>\r\n        <th\r\n          v-for=\"(item, index) in tableTitleContrast\"\r\n          :key=\"index + item\"\r\n          :style=\"{ minWidth: item.minWidth }\"\r\n        >\r\n          {{ item.name }}\r\n        </th>\r\n      </tr>\r\n      <tr v-for=\"(singleList, index) in give_price_list\" :key=\"singleList.pkid\">\r\n        <td>{{ index + 1 + (currentPage - 1) * pageSize }}</td>\r\n        <td>\r\n          <router-link\r\n            :to=\"'/merchant/information?pkid=' + singleList.recv_user.pkid\"\r\n            style=\"color:#0096ff\"\r\n          >\r\n            {{ singleList.recv_user.dept_name }}\r\n          </router-link>\r\n        </td>\r\n        <td>{{ singleList.total_price * billInfo.amount }}</td>\r\n        <td>\r\n          <div class=\"detail-list\">\r\n            <span>{{ singleList.total_price }}</span>\r\n            <div class=\"show-list\" @click=\"getSlavList(singleList)\">\r\n              標書\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td>{{ singleList.deliver_date.split(\" \")[0] }}</td>\r\n        <td>{{ singleList.descp }}</td>\r\n        <!-- 狀態為待選標 且 價差小於50% -->\r\n        <td\r\n          v-if=\"billInfo.bill_status === '1' && singleList.f_valid === 'Y'\"\r\n          :class=\"toEndTimeFlag ? 'choose-win' : 'choose-win-disabled'\"\r\n          @click=\"\r\n            chooseToWin(\r\n              singleList.pkid,\r\n              singleList.recv_user.dept_name,\r\n              singleList.f_valid\r\n            )\r\n          \"\r\n        >\r\n          选为中标\r\n        </td>\r\n        <td\r\n          v-else-if=\"billInfo.bill_status === '1' && singleList.f_valid === 'N'\"\r\n        >\r\n          報價過高\r\n        </td>\r\n        <td v-else>\r\n          <img\r\n            v-if=\"singleList.f_win_bid === 'Y'\"\r\n            src=\"../../assets/imgs/demand/winImg.png\"\r\n            alt\r\n          />\r\n        </td>\r\n      </tr>\r\n      <tr v-if=\"give_price_list.length == 0\">\r\n        <td colspan=\"7\">暫無數據</td>\r\n      </tr>\r\n    </table>\r\n\r\n    <!-- 分頁 -->\r\n    <Paging\r\n      :total=\"total\"\r\n      :current-page=\"currentPage\"\r\n      :page-size=\"pageSize\"\r\n      @getCurrentPage=\"getListDate\"\r\n    ></Paging>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Paging from \"@/components/paging/Paging\";\r\nimport {\r\n  query_bill_by_pkid,\r\n  query_give_price_list,\r\n  select_win_bid,\r\n  abandon_bid\r\n} from \"@/api/order\";\r\n\r\nconst tableTitleContrast = [\r\n  { minWidth: \"40px\", name: \"排名\" },\r\n  { minWidth: \"160px\", name: \"單位\" },\r\n  { minWidth: \"60px\", name: \"總報價\" },\r\n  { minWidth: \"180px\", name: \"廠商報價\" },\r\n  { minWidth: \"100px\", name: \"交期\" },\r\n  { minWidth: \"140px\", name: \"備註\" },\r\n  { minWidth: \"140px\", name: \"操作\" }\r\n];\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 是否能選標\r\n      toEndTimeFlag: false,\r\n      sortItem: \"\",\r\n      // 總數據量\r\n      total: 1,\r\n      // 當前頁數\r\n      currentPage: 1,\r\n      // 每一頁長度\r\n      pageSize: 8,\r\n      pkid: \"\",\r\n      // 數據\r\n      give_price_list: [],\r\n      // 訂單信息\r\n      billInfo: {},\r\n      // 零件清單信息\r\n      slav_list: [],\r\n      // 排序\r\n      classifyList: [\r\n        { id: 1, name: \"綜合排序\", val: \"complex\" },\r\n        { id: 2, name: \"價格優先\", val: \"price\" },\r\n        { id: 3, name: \"交期優先\", val: \"date\" }\r\n      ],\r\n      // 默認 | 選中 的排序方式\r\n      sortBy: \"complex\",\r\n      // 是否展開\r\n      sortFlag: false,\r\n      // \r\n      recvPkid: \"\",\r\n      // 表格頭信息對照\r\n      tableTitleContrast\r\n    };\r\n  },\r\n  methods: {\r\n    // 棄標\r\n    faliBid() {\r\n      this.$confirm(\"此操作將“廢棄”此訂單，是否繼續？\", \"警告\", {\r\n        confirmButtonText: \"確認\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"error\"\r\n      })\r\n        .then(() => {\r\n          const pkid = this.billInfo.pkid;\r\n          abandon_bid(pkid).then(res => {\r\n            if (res.code === \"1\") {\r\n              this.$router.push(\"/demand\");\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"已棄標\"\r\n              });\r\n            } else {\r\n              this.$message.error(res.msg);\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消\"\r\n          });\r\n        });\r\n    },\r\n    // 查看報價清單\r\n    checkList() {\r\n      sessionStorage.setItem(\"biddinfdDoc\", JSON.stringify(this.billInfo));\r\n      sessionStorage.setItem(\"recvPkid\", JSON.stringify(this.recvPkid));\r\n      // const url = \"/biddingDoc?loaded=true&pkid=\" + this.pkid;\r\n      let routeData = this.$router.resolve({\r\n        path: \"/biddingDoc\",\r\n        query: { loaded: true, pkid: this.pkid }\r\n      });\r\n      window.open(routeData.href, \"_blank\");\r\n    },\r\n\r\n    // 選中的項\r\n    selectClassfiy(val) {\r\n      this.sortBy = val;\r\n      this.sortFlag = false;\r\n    },\r\n\r\n    // 獲取零件清單信息\r\n    getSlavList(singleList) {\r\n      const pkid = singleList.pkid;\r\n      this.recvPkid = singleList.recv_user_pkid;\r\n      sessionStorage.setItem(\r\n        \"deliverDate\",\r\n        JSON.stringify(singleList.deliver_date)\r\n      );\r\n      for (let item of this.give_price_list) {\r\n        if (item.pkid == pkid) {\r\n          sessionStorage.setItem(\"slavList\", JSON.stringify(item.slav_list));\r\n          this.checkList();\r\n        }\r\n      }\r\n    },\r\n\r\n    // 判斷是否能選擇中標\r\n    getTimeStatus() {\r\n      let endDate = new Date(this.billInfo.bid_end_date);\r\n      let nowDate = new Date();\r\n      this.toEndTimeFlag = nowDate > endDate ? true : false;\r\n    },\r\n\r\n    // 選為中標\r\n    chooseToWin(pkid, deptName) {\r\n      if (!this.toEndTimeFlag) {\r\n        return this.$alert(\"競標結束時間未到，不能選標！\", \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          callback: action => {\r\n            return action;\r\n          }\r\n        });\r\n      }\r\n\r\n      this.$confirm('请确认是否将 \"' + deptName + '\" 选为中标单位?', \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"success\"\r\n      })\r\n        .then(() => {\r\n          select_win_bid(pkid).then(res => {\r\n            if (res.code === \"1\") {\r\n              this.getBillInfo();\r\n              this.getListDate(\r\n                Number(sessionStorage.getItem(\"demandDetailsCurrentPage\"))\r\n              );\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"成功!\"\r\n              });\r\n            } else {\r\n              this.$message.error(res.msg);\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消\"\r\n          });\r\n        });\r\n    },\r\n\r\n    // 向後端發起請求獲取數據\r\n    getListDate(page = 1) {\r\n      this.currentPage = Number(page);\r\n      sessionStorage.setItem(\"demandDetailsCurrentPage\", this.currentPage);\r\n      const data = {\r\n        bill_pkid: this.pkid,\r\n        pageIndex: this.currentPage,\r\n        pageSize: this.pageSize,\r\n        sort_way: this.sortBy\r\n      };\r\n      query_give_price_list(data).then(res => {\r\n        if (res.code === \"1\") {\r\n          // 清空原有數據\r\n          this.give_price_list = [];\r\n          this.total = res.t.row_total;\r\n          const listData = res.t.give_price_list;\r\n          this.changeListData(listData);\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n\r\n    // 修改展示列表數據\r\n    changeListData(listData) {\r\n      for (let item of listData) {\r\n        this.give_price_list.push(item);\r\n      }\r\n    },\r\n\r\n    // 查詢訂單信息\r\n    getBillInfo() {\r\n      query_bill_by_pkid(this.pkid).then(res => {\r\n        if (res.code === \"1\") {\r\n          this.billInfo = res.t;\r\n          this.getTimeStatus();\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    }\r\n  },\r\n  components: {\r\n    Paging\r\n  },\r\n  created() {\r\n    this.pkid = this.$router.history.current.query.pkid;\r\n\r\n    // 獲取分頁數據\r\n    let page = Number(sessionStorage.getItem(\"demandDetailsCurrentPage\"));\r\n    page = page ? page : 1;\r\n    this.getListDate(page);\r\n\r\n    // 查詢訂單信息\r\n    this.getBillInfo();\r\n  },\r\n  filters: {\r\n    // 過濾排序名稱的顯示\r\n    sortNameFormat(val) {\r\n      if (!val) return \"\";\r\n      switch (val) {\r\n        case \"complex\":\r\n          return \"綜合排序\";\r\n        case \"price\":\r\n          return \"價格優先\";\r\n        case \"date\":\r\n          return \"時間優先\";\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    sortBy: function() {\r\n      this.getListDate();\r\n    }\r\n  },\r\n  computed: {}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.choose-details {\r\n  background-color: #eff9ff;\r\n  box-sizing: border-box;\r\n  color: #12222e;\r\n  padding: 30px;\r\n}\r\n.top {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n// 返回按鈕\r\n.back-btn {\r\n  display: flex;\r\n  > a {\r\n    color: #626f7f;\r\n    font-size: 14px;\r\n    display: flex;\r\n    align-items: center;\r\n    &::before {\r\n      content: \"\";\r\n      display: block;\r\n      width: 17px;\r\n      height: 12px;\r\n      background: url(../../assets/imgs/personal/back.png) no-repeat;\r\n      margin-right: 6px;\r\n    }\r\n  }\r\n}\r\n// 排序\r\n.sort {\r\n  color: #626f7f;\r\n  font-size: 14px;\r\n  position: relative;\r\n}\r\n.fail-btn {\r\n  width: 70px;\r\n  height: 26px;\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: -140px;\r\n  background-color: #d3dfe7;\r\n  border: 0;\r\n  border-radius: 13px;\r\n  cursor: pointer;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n}\r\n.sort-btn {\r\n  width: 160px;\r\n  height: 30px;\r\n  border: 1px solid #c0c8cf;\r\n  border-radius: 15px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  cursor: pointer;\r\n  span {\r\n    display: inline-block;\r\n  }\r\n  span:nth-child(2) {\r\n    text-align: left;\r\n    width: 60px;\r\n  }\r\n}\r\n.classify-list {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: #d7efff;\r\n  width: 130px;\r\n  z-index: 1;\r\n  span {\r\n    display: block;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    &.active,\r\n    &:hover {\r\n      color: #0096ff;\r\n    }\r\n  }\r\n}\r\n\r\n// 主內容標題\r\n.title {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  font-size: 14px;\r\n}\r\n.tit-text {\r\n  color: #212f3a;\r\n  font-size: 24px;\r\n  position: relative;\r\n  .title_btn {\r\n    width: 70px;\r\n    height: 26px;\r\n    border-radius: 13px;\r\n    line-height: 26px;\r\n    text-align: center;\r\n    position: absolute;\r\n    background-color: #0096ff;\r\n    color: #eff9ff;\r\n    font-size: 16px;\r\n    right: -80px;\r\n    bottom: -10px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n.tit-info {\r\n  color: #626f7f;\r\n  margin-top: 10px;\r\n}\r\n.tit-unit {\r\n  color: #626f7f;\r\n  margin: 24px 0 16px;\r\n  span {\r\n    font-size: 36px;\r\n  }\r\n}\r\n// 表格\r\ntable {\r\n  tr {\r\n    th,\r\n    td {\r\n      border: 1px solid #c0c8cf;\r\n      font-size: 14px;\r\n      height: 60px;\r\n    }\r\n    th {\r\n      height: 40px;\r\n      font-weight: 400;\r\n      background-color: #d3dfe7;\r\n    }\r\n  }\r\n  .detail-list {\r\n    display: flex;\r\n    > span {\r\n      width: 60%;\r\n    }\r\n  }\r\n  .show-list {\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    color: #0096ff;\r\n    &::before {\r\n      content: \"\";\r\n      display: inline-block;\r\n      width: 16px;\r\n      height: 16px;\r\n      background-image: url(\"../../assets/imgs/demand/look_gray.png\");\r\n      background-repeat: no-repeat;\r\n      margin-right: 4px;\r\n    }\r\n    &:hover::before {\r\n      background-image: url(\"../../assets/imgs/demand/look.png\");\r\n    }\r\n  }\r\n  .choose-win {\r\n    color: #0096ff;\r\n    cursor: pointer;\r\n  }\r\n  .choose-win-disabled {\r\n    color: #626f7f;\r\n    cursor: not-allowed;\r\n  }\r\n}\r\n// 分页\r\n.paging {\r\n  padding: 28px;\r\n  text-align: center;\r\n  height: 50px;\r\n  /deep/ .number {\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    background: url(../../assets/imgs/index/pageIndBG.png) no-repeat center;\r\n    color: #12222e;\r\n    font-size: 14px;\r\n    &.active {\r\n      color: #fff;\r\n      background: url(../../assets/imgs/index/pageindBG-ac.png) no-repeat center;\r\n    }\r\n    &:hover {\r\n      color: #fff;\r\n    }\r\n  }\r\n  /deep/ .el-icon {\r\n    color: #12222e;\r\n    background: #eff9ff;\r\n  }\r\n  /deep/ .btn-next,\r\n  /deep/ .btn-prev {\r\n    padding: 0 10px;\r\n    width: 70px;\r\n    height: 30px;\r\n    background: url(../../assets/imgs/index/pageBG.png) no-repeat center /\r\n      contain;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChooseDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChooseDetails.vue?vue&type=template&id=4a04de47&scoped=true&\"\nimport script from \"./ChooseDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./ChooseDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChooseDetails.vue?vue&type=style&index=0&id=4a04de47&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a04de47\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}