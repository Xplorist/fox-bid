(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-366001e8"],{1169:function(e,t,r){var n=r("2d95");e.exports=Array.isArray||function(e){return"Array"==n(e)}},1302:function(e,t,r){e.exports=r.p+"img/portrait.017effe5.png"},3231:function(e,t,r){"use strict";var n=r("bd3e"),o=r.n(n);o.a},"37c8":function(e,t,r){t.f=r("2b4c")},"3a72":function(e,t,r){var n=r("7726"),o=r("8378"),i=r("2d00"),a=r("37c8"),s=r("86cc").f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"3ebc":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));var n=r("fcc2");function o(){var e=encodeURIComponent(n["a"].userInfo.user_pic_file.file_save_path),t=encodeURIComponent(n["a"].userInfo.user_pic_file.file_save_name),r=encodeURIComponent(n["a"].userInfo.user_pic_file.file_origin_name),o="/api/pic_show/load",i=o+"?file_save_path="+e+"&file_save_name="+t+"&file_origin_name="+r;return i}function i(e,t,r){var n=encodeURIComponent(e),o=encodeURIComponent(t),i=encodeURIComponent(r),a="/api/pic_show/load",s=a+"?file_save_path="+n+"&file_save_name="+o+"&file_origin_name="+i;return s}},"3f5e":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r("365c");function o(e){var t="/api/ftp_file/upload",r="multipart/form-data";return n["a"].post(t,e,r)}function i(e){var t="/api/ftp_file/delete";return n["a"].post(t,e)}function a(e){var t="/api/bill/delete_part_doc_file_by_pkid";return n["a"].post(t,e)}},"67ab":function(e,t,r){var n=r("ca5a")("meta"),o=r("d3f4"),i=r("69a8"),a=r("86cc").f,s=0,f=Object.isExtensible||function(){return!0},c=!r("79e5")((function(){return f(Object.preventExtensions({}))})),u=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!f(e))return"F";if(!t)return"E";u(e)}return e[n].i},m=function(e,t){if(!i(e,n)){if(!f(e))return!0;if(!t)return!1;u(e)}return e[n].w},p=function(e){return c&&d.NEED&&f(e)&&!i(e,n)&&u(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:l,getWeak:m,onFreeze:p}},"7bbc":function(e,t,r){var n=r("6821"),o=r("9093").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},"8a81":function(e,t,r){"use strict";var n=r("7726"),o=r("69a8"),i=r("9e1e"),a=r("5ca1"),s=r("2aba"),f=r("67ab").KEY,c=r("79e5"),u=r("5537"),l=r("7f20"),m=r("ca5a"),p=r("2b4c"),d=r("37c8"),_=r("3a72"),b=r("d4c0"),h=r("1169"),g=r("cb7c"),y=r("d3f4"),v=r("4bf8"),k=r("6821"),O=r("6a99"),w=r("4630"),I=r("2aeb"),N=r("7bbc"),C=r("11e9"),j=r("2621"),S=r("86cc"),x=r("0d58"),E=C.f,P=S.f,$=N.f,F=n.Symbol,U=n.JSON,q=U&&U.stringify,D="prototype",z=p("_hidden"),R=p("toPrimitive"),T={}.propertyIsEnumerable,A=u("symbol-registry"),M=u("symbols"),J=u("op-symbols"),W=Object[D],G="function"==typeof F&&!!j.f,L=n.QObject,Y=!L||!L[D]||!L[D].findChild,K=i&&c((function(){return 7!=I(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=E(W,t);n&&delete W[t],P(e,t,r),n&&e!==W&&P(W,t,n)}:P,B=function(e){var t=M[e]=I(F[D]);return t._k=e,t},Q=G&&"symbol"==typeof F.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof F},V=function(e,t,r){return e===W&&V(J,t,r),g(e),t=O(t,!0),g(r),o(M,t)?(r.enumerable?(o(e,z)&&e[z][t]&&(e[z][t]=!1),r=I(r,{enumerable:w(0,!1)})):(o(e,z)||P(e,z,w(1,{})),e[z][t]=!0),K(e,t,r)):P(e,t,r)},H=function(e,t){g(e);var r,n=b(t=k(t)),o=0,i=n.length;while(i>o)V(e,r=n[o++],t[r]);return e},X=function(e,t){return void 0===t?I(e):H(I(e),t)},Z=function(e){var t=T.call(this,e=O(e,!0));return!(this===W&&o(M,e)&&!o(J,e))&&(!(t||!o(this,e)||!o(M,e)||o(this,z)&&this[z][e])||t)},ee=function(e,t){if(e=k(e),t=O(t,!0),e!==W||!o(M,t)||o(J,t)){var r=E(e,t);return!r||!o(M,t)||o(e,z)&&e[z][t]||(r.enumerable=!0),r}},te=function(e){var t,r=$(k(e)),n=[],i=0;while(r.length>i)o(M,t=r[i++])||t==z||t==f||n.push(t);return n},re=function(e){var t,r=e===W,n=$(r?J:k(e)),i=[],a=0;while(n.length>a)!o(M,t=n[a++])||r&&!o(W,t)||i.push(M[t]);return i};G||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var e=m(arguments.length>0?arguments[0]:void 0),t=function(r){this===W&&t.call(J,r),o(this,z)&&o(this[z],e)&&(this[z][e]=!1),K(this,e,w(1,r))};return i&&Y&&K(W,e,{configurable:!0,set:t}),B(e)},s(F[D],"toString",(function(){return this._k})),C.f=ee,S.f=V,r("9093").f=N.f=te,r("52a7").f=Z,j.f=re,i&&!r("2d00")&&s(W,"propertyIsEnumerable",Z,!0),d.f=function(e){return B(p(e))}),a(a.G+a.W+a.F*!G,{Symbol:F});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),oe=0;ne.length>oe;)p(ne[oe++]);for(var ie=x(p.store),ae=0;ie.length>ae;)_(ie[ae++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return o(A,e+="")?A[e]:A[e]=F(e)},keyFor:function(e){if(!Q(e))throw TypeError(e+" is not a symbol!");for(var t in A)if(A[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!G,"Object",{create:X,defineProperty:V,defineProperties:H,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var se=c((function(){j.f(1)}));a(a.S+a.F*se,"Object",{getOwnPropertySymbols:function(e){return j.f(v(e))}}),U&&a(a.S+a.F*(!G||c((function(){var e=F();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}))),"JSON",{stringify:function(e){var t,r,n=[e],o=1;while(arguments.length>o)n.push(arguments[o++]);if(r=t=n[1],(y(t)||void 0!==e)&&!Q(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Q(t))return t}),n[1]=t,q.apply(U,n)}}),F[D][R]||r("32e9")(F[D],R,F[D].valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},ac4d:function(e,t,r){r("3a72")("asyncIterator")},aef7:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"information"}},[r("div",{staticClass:"main_title"},[e._v("個人資料")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{staticClass:"properties",attrs:{label:"賬號屬性:"}},[r("span",[e._v(e._s(e.form.properties))])]),r("el-form-item",{staticClass:"portrait",attrs:{label:"LOGO頭像:"}},[r("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.form.portraitUrl,fit:"cover"}}),r("input",{ref:"fileInp",staticClass:"dis_none",attrs:{type:"file"},on:{change:e.getFile}}),r("span",{on:{click:e.upImg}},[e._v("更換")])],1),r("el-form-item",{attrs:{label:"賬號名稱:",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{staticClass:"department",attrs:{label:"所屬地區:"}},[r("el-select",{nativeOn:{click:function(t){return e.query_department("factory")}},model:{value:e.form.fctry_zone,callback:function(t){e.$set(e.form,"fctry_zone",t)},expression:"form.fctry_zone"}},e._l(e.form.fctry_zone_list,(function(e){return r("el-option",{key:e.pkid,attrs:{label:e.name,value:e.name}})})),1)],1),r("el-form-item",{staticClass:"department",attrs:{label:"所屬單位:"}},[r("el-select",{nativeOn:{click:function(t){return e.query_department("SECN_CMPY")}},model:{value:e.form.secn_cmpy,callback:function(t){e.$set(e.form,"secn_cmpy",t)},expression:"form.secn_cmpy"}},e._l(e.form.secn_cmpy_list,(function(e){return r("el-option",{key:e.pkid,attrs:{label:e.name,value:e.name}})})),1),r("el-select",{nativeOn:{click:function(t){return e.query_department("ENTRPS_GROUP")}},model:{value:e.form.entrps_group,callback:function(t){e.$set(e.form,"entrps_group",t)},expression:"form.entrps_group"}},e._l(e.form.entrps_group_list,(function(e){return r("el-option",{key:e.pkid,attrs:{label:e.name,value:e.name}})})),1),r("el-select",{nativeOn:{click:function(t){return e.query_department("PD_OFFICE")}},model:{value:e.form.pd_office,callback:function(t){e.$set(e.form,"pd_office",t)},expression:"form.pd_office"}},e._l(e.form.pd_office_list,(function(e){return r("el-option",{key:e.pkid,attrs:{label:e.name,value:e.name}})})),1)],1),r("el-form-item",{attrs:{label:"單位代碼:",prop:"departCode"}},[r("el-input",{on:{focus:function(t){e.form.departName=""},blur:e.queryDeptName},model:{value:e.form.departCode,callback:function(t){e.$set(e.form,"departCode",t)},expression:"form.departCode"}})],1),r("el-form-item",{attrs:{label:"單位名稱:",prop:"departName"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.departName,callback:function(t){e.$set(e.form,"departName",t)},expression:"form.departName"}})],1),r("el-form-item",{attrs:{label:"交易法人:"}},[r("span",[e._v(e._s(e.form.corporate))])]),r("el-form-item",{staticClass:"costCode",attrs:{label:"費用代碼:",prop:"costCode"}},[r("span",[e._v(e._s(e.form.costCode))]),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.open("costCode")}}},[e._v(" 變更")])],1),r("el-form-item",{attrs:{label:"業務經理:",prop:"manager"}},[r("el-input",{model:{value:e.form.manager,callback:function(t){e.$set(e.form,"manager",t)},expression:"form.manager"}})],1),r("el-form-item",{staticClass:"tel",attrs:{label:"固定電話:",prop:"telNum"}},[r("el-input",{model:{value:e.form.telNum,callback:function(t){e.$set(e.form,"telNum",t)},expression:"form.telNum"}})],1),r("el-form-item",{staticClass:"tel",attrs:{label:"移動電話:",prop:"mobileNum"}},[r("el-input",{model:{value:e.form.mobileNum,callback:function(t){e.$set(e.form,"mobileNum",t)},expression:"form.mobileNum"}})],1),r("el-form-item",{staticClass:"email",attrs:{label:"Email:",prop:"email"}},[r("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("el-form-item",{staticClass:"intro",attrs:{label:"簡介:",prop:"intro"}},[r("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),r("el-form-item",{attrs:{label:" "}},[r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},o=[],i=(r("8e6e"),r("456d"),r("bd86")),a=(r("ac4d"),r("8a81"),r("ac6a"),r("7f7f"),r("2f62")),s=r("5c96"),f=r("3f5e"),c=r("c24f"),u=r("3ebc"),l=r("c0e7");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={data:function(){var e=this,t=function(t,r,n){""===r?n(new Error("请輸入名稱")):r.length<3||r.length>10?n(new Error("长度在 3 到 10 个字符")):e.userInfo.username==e.form.name?n():e.ck_user(e.form.name,n)};return{form:{properties:"集團內部賬號",portraitUrl:r("1302"),name:"",fctry_zone:"",secn_cmpy:"",entrps_group:"",pd_office:"",fctry_zone_list:[],secn_cmpy_list:[],entrps_group_list:[],pd_office_list:[],departName:"",departCode:"",corporate:"",costCode:"",bankName:"",bankAccount:"",manager:"",telNum:"",mobileNum:"",email:"",intro:"",in_out_type:""},rules:{name:[{required:!0,validator:t,trigger:"blur"}],departCode:[{required:!0,message:"單位代碼不能為空",trigger:"blur"}],departName:[{required:!0,message:"未查詢到单位名称，請檢查",trigger:"blur"}],costCode:[{required:!0,message:"费用代码不能为空",trigger:"blur"}],manager:[{required:!0,message:"业务经理不能为空",trigger:"blur"}],mobileNum:[{required:!0,message:"移動電話不能为空",trigger:"blur"}],telNum:[{required:!0,message:"固定电话不能为空",trigger:"blur"}],email:[{required:!0,message:"email不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],intro:[{max:100,message:"最長100個字符",trigger:"blur"}]},dialogFormVisible:!1,alertForm:{bankName:"",bankAccount:""},user_pic_file:{}}},mounted:function(){this.initData()},methods:{queryDeptName:function(){var e=this;Object(l["g"])(this.form.departCode).then((function(t){"1"===t.code?e.form.departName=t.t.dept_name:(e.form.departName="",e.$message.error("查詢失敗，請檢查單位代碼是否輸入正確！"))}))},query_department:function(e){var t=this,r="";switch(e){case"factory":Object(l["h"])().then((function(e){"1"===e.code&&(t.form.fctry_zone_list=e.t)}));break;case"SECN_CMPY":Object(l["d"])().then((function(e){"1"===e.code&&(t.form.secn_cmpy_list=e.t,t.form.entrps_group="",t.form.pd_office="")}));break;case"ENTRPS_GROUP":var n=!0,o=!1,i=void 0;try{for(var a,s=this.form.secn_cmpy_list[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var f=a.value;this.form.secn_cmpy==f.name&&(r=f.pkid)}}catch(b){o=!0,i=b}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}Object(l["b"])(r).then((function(e){"1"===e.code&&(t.form.entrps_group_list=e.t,t.form.pd_office="")}));break;case"PD_OFFICE":var c=!0,u=!1,m=void 0;try{for(var p,d=this.form.entrps_group_list[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var _=p.value;this.form.entrps_group==_.name&&(r=_.pkid)}}catch(b){u=!0,m=b}finally{try{c||null==d.return||d.return()}finally{if(u)throw m}}Object(l["c"])(r).then((function(e){"1"===e.code&&(t.form.pd_office_list=e.t)}));break}},ck_user:function(e,t){var r={username:e};Object(l["a"])(r).then((function(e){"0"==e.code?t(new Error("賬戶已存在!")):t()}))},save:function(){var e=this;this.$refs["form"].validate((function(t){return t?e.form.entrps_group&&e.form.pd_office?void e.updateInfo():e.$message.error("所屬單位未填寫完整"):(console.log("error submit!!"),!1)}))},updateInfo:function(){var e=this,t={pkid:this.userInfo.pkid,username:this.form.name,fctry_zone:this.form.fctry_zone,secn_cmpy:this.form.secn_cmpy,entrps_group:this.form.entrps_group,pd_office:this.form.pd_office,dept_name:this.form.departName,dept_code:this.form.departCode,legal_person:this.form.corporate,cost_code:this.form.costCode,busis_mngr:this.form.manager,tel:this.form.telNum,phone:this.form.mobileNum,email:this.form.email,summary:this.form.intro,user_pic_file:this.user_pic_file,send_recv_type:this.userInfo.send_recv_type};console.log(t),Object(c["d"])(t).then((function(t){"1"===t.code?(s["Message"].success("已保存"),Object(c["c"])(e.userInfo.pkid).then((function(t){console.log(t),"1"===t.code&&(e.$store.dispatch("get_userInfo",t.t),e.$store.dispatch("get_porImgUrl",Object(u["b"])()))}))):s["Message"].error("出錯啦，稍後再試試吧")}))},upImg:function(){this.$refs.fileInp.dispatchEvent(new MouseEvent("click"))},getFile:function(){var e=this,t=this.$refs.fileInp.files[0],r=window.URL||window.webkitURL;if(t){if("image/jpeg"!==t.type&&"image/png"!==t.type&&"image/gif"!==t.type)return void alert("請選擇圖片文件");var n=r.createObjectURL(t);this.form.portraitUrl=n;var o=new FormData;o.append("file",t),o.append("file_type","user_pic"),Object(f["c"])(o).then((function(t){1==t.code&&(console.log(t.t),e.user_pic_file={file_save_path:t.t.file_save_path,file_save_name:t.t.file_save_name,file_origin_name:t.t.file_origin_name})}))}},initData:function(){this.form.portraitUrl=this.porImgUrl,this.form.name=this.userInfo.username,this.form.fctry_zone=this.userInfo.fctry_zone,this.form.secn_cmpy=this.userInfo.secn_cmpy,this.form.entrps_group=this.userInfo.entrps_group,this.form.pd_office=this.userInfo.pd_office,this.form.departName=this.userInfo.dept_name,this.form.departCode=this.userInfo.dept_code,this.form.corporate=this.userInfo.legal_person,this.form.costCode=this.userInfo.cost_code,this.form.manager=this.userInfo.busis_mngr,this.form.telNum=this.userInfo.tel,this.form.mobileNum=this.userInfo.phone,this.form.email=this.userInfo.email,this.form.intro=this.userInfo.summary,this.form.in_out_type=this.userInfo.in_out_type,console.log(this.userInfo)},open:function(){var e=this,t="費用代碼";this.$prompt("请输入"+t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:t+"格式不正确"}).then((function(r){var n=r.value;if(!n)return e.$message.warning("费用代码不能为空");e.$message({type:"success",message:"已修改"+t+"為: "+n}),e.form.costCode=n})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},transmit:function(e){if("cancel"==e)this.$message({type:"info",message:"取消输入"});else{if("confirm"!=e)return;this.form.bankName=this.alertForm.bankName,this.form.bankAccount=this.alertForm.bankAccount,this.$message({type:"success",message:"修改成功"})}}},computed:p({},Object(a["c"])({userInfo:function(e){return e.userInfo},porImgUrl:function(e){return e.porImgUrl}}))},_=d,b=(r("3231"),r("2877")),h=Object(b["a"])(_,n,o,!1,null,"2285369c",null);t["default"]=h.exports},bd3e:function(e,t,r){},c24f:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s}));var n=r("365c");function o(e){var t="/api/user/login";return n["a"].post(t,e)}function i(e){e={username:e};var t="/api/user/login_user_info";return n["a"].postWithToken(t,e)}function a(e){e={pkid:e};var t="/api/user/query_user_info_by_pkid";return n["a"].post(t,e)}function s(e){var t="/api/user/update_user_info";return n["a"].postWithToken(t,e)}},d4c0:function(e,t,r){var n=r("0d58"),o=r("2621"),i=r("52a7");e.exports=function(e){var t=n(e),r=o.f;if(r){var a,s=r(e),f=i.f,c=0;while(s.length>c)f.call(e,a=s[c++])&&t.push(a)}return t}}}]);
//# sourceMappingURL=chunk-366001e8.258f287f.js.map