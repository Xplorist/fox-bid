(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-944963f0"],{"0229":function(t,e,i){},1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"153f":function(t,e,i){t.exports=i.p+"img/winImg.cba78bee.png"},"1ca6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAAk0lEQVQYV2NMyqufysDIkMWAH0xjDA0NZeaV1NrBwMjgglXtf4Y99y4xejKCJBMKGgSY/jOcYGD4r46i+D/DrX9MjOYLJjR8ACsEgbjsejUW5v8nGBgZBcEC//+/Z/7LaDF7auMtEBeuEMRJzqtz/s/IuAOs8N9fz3mTW/bADEJRCBJMLKjLZPrPxDh3YsM0ZGcAAGFyKfDeCywQAAAAAElFTkSuQmCC"},"2c4b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chooseDetails"}},[n("div",{staticClass:"top"},[n("div",{staticClass:"backBtn"},[n("router-link",{attrs:{to:"/demand"}},[n("span"),t._v("\n        返回\n      ")]),n("span",[t._v("選標")])],1),n("div",{staticClass:"sort",staticStyle:{position:"relative"}},[n("div",{staticClass:"sort_btn",on:{click:t.sortList}},[n("span",[t._v("排序：")]),n("span",[t._v(t._s(t._f("sortNameFormat")(t.sortBy)))]),n("img",{attrs:{src:i("1ca6"),alt:""}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sortFlag,expression:"sortFlag"}],staticClass:"classifyList"},t._l(t.classifyList,(function(e){return n("span",{key:e.id,class:{active:t.sortBy==e.val},on:{click:function(i){return t.selectClassfiy(e.val)}}},[t._v(t._s(e.name))])})),0)])]),t.billInfo?n("div",{staticClass:"title"},[n("div",{staticClass:"tit_text"},[t._v("\n      【模具】需求單號"+t._s(t.billInfo.bill_no)+" 需求量:"+t._s(t.billInfo.amount)+"\n      "),n("router-link",{staticClass:"title_btn",attrs:{to:"/particulars?pkid="+t.pkid}},[t._v("詳情")])],1),n("div",{staticClass:"tit_info"},[t._v("我的報價: "+t._s(t.billInfo.total_price)+" "+t._s(t.billInfo.money_type))]),n("div",{staticClass:"tit_info"},[t._v("發佈時間: "+t._s(t.billInfo.publish_date))]),n("div",{staticClass:"tit_unit"},[t._v("\n      當前項目投標單位數\n      "),n("span",[t._v(t._s(t.billInfo.give_recv_user_list?t.billInfo.give_recv_user_list.length:0))])])]):t._e(),t.give_price_list?n("table",{staticStyle:{width:"100%","text-align":"center","border-collapse":"collapse"}},[t._m(0),t._l(t.give_price_list,(function(e,r){return n("tr",{key:e.pkid},[n("td",[t._v(t._s(r+1+(t.currentPage-1)*t.pageSize))]),n("td",[n("router-link",{staticStyle:{color:"#0096ff"},attrs:{to:"/merchant/information?pkid="+e.recv_user.pkid}},[t._v(t._s(e.recv_user.dept_name))])],1),n("td",[n("div",{staticClass:"detailList"},[n("span",[t._v(t._s(e.total_price*t.billInfo.amount))]),n("div",{staticClass:"showList",on:{click:function(i){return t.getSlavList(e.pkid,e.recv_user_pkid)}}},[n("span"),t._v("\n            清單\n          ")])])]),n("td",[t._v(t._s(e.deliver_date.split(" ")[0]))]),n("td",[t._v(t._s(e.descp))]),"1"===t.billInfo.bill_status?n("td",{staticClass:"chooseToWin",on:{click:function(i){return t.chooseToWin(e.pkid,e.recv_user.dept_name)}}},[t._v("选为中标")]):n("td",["Y"===e.f_win_bid?n("img",{attrs:{src:i("153f"),alt:""}}):t._e()])])})),0==t.give_price_list.length?n("tr",[n("td",{attrs:{colspan:"6"}},[t._v("暫無數據")])]):t._e()],2):t._e(),n("Paging",{attrs:{total:t.total,"current-page":t.currentPage,"page-size":t.pageSize},on:{getCurrentPage:t.getListDate}}),n("section",{directives:[{name:"show",rawName:"v-show",value:t.alertBoxFlag,expression:"alertBoxFlag"}],attrs:{id:"alertBox"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"closeBox",on:{click:t.alertBoxShow}}),n("div",{staticClass:"con_form"},[n("div",{staticClass:"list_info"},[t._v("報價清單（單套）:")]),n("table",{staticClass:"list_table",attrs:{cellspacing:"0",cellpadding:"0"}},[n("tr",[n("th",[t._v("零件名")]),n("th",[t._v("零件名（接單方定義）")]),n("th",[t._v("數量")]),n("th",[t._v("報價（"+t._s(t.billInfo.money_type)+"/個）")]),n("th",[t._v("小計（"+t._s(t.billInfo.money_type)+"）")])]),t._l(t.slav_list,(function(e){return n("tr",{key:e.pkid},[n("td",[t._v(t._s(e.part_doc_file?e.part_doc_file.file_origin_name:"其它"))]),n("td",[t._v(t._s(e.part_name))]),n("td",[t._v(t._s(e.part_amunt||0))]),n("td",[t._v(t._s(e.part_unit_price||0))]),n("td",[t._v(t._s(e.part_price_sum||0))])])}))],2),n("button",{staticStyle:{"margin-top":"40px"},on:{click:t.exportExcel}},[t._v("導出Excel")])])])])],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",{staticStyle:{"min-width":"40px"}},[t._v("序號")]),i("th",{staticStyle:{"min-width":"160px"}},[t._v("單位")]),i("th",{staticStyle:{"min-width":"180px"}},[t._v("報價")]),i("th",[t._v("交期")]),i("th",{staticStyle:{"min-width":"280px"}},[t._v("理由說明")]),i("th",{staticStyle:{"min-width":"140px"}},[t._v("操作")])])}],a=(i("c5f6"),i("ac4d"),i("8a81"),i("ac6a"),i("def5")),s=i("f8b7"),o={data:function(){return{sortItem:"",total:1,currentPage:1,pageSize:8,pkid:"",give_price_list:[],billInfo:{},alertBoxFlag:!1,slav_list:[],classifyList:[{id:1,name:"綜合排序",val:"complex"},{id:2,name:"價格優先",val:"price"},{id:3,name:"交期優先",val:"date"}],sortBy:"complex",sortFlag:!1,excelList:[],autoWidth:!0,bookType:"xlsx",filename:""}},methods:{checkList:function(t){sessionStorage.setItem("biddinfdDoc",JSON.stringify(this.billInfo)),sessionStorage.setItem("recvPkid",JSON.stringify(t));var e="/biddingDoc?loaded=true&pkid="+this.pkid;window.open(e)},sortList:function(){this.sortFlag=!this.sortFlag},selectClassfiy:function(t){console.log(t),this.sortBy=t,this.sortFlag=!1},alertBoxShow:function(){var t=!this.alertBoxFlag;return this.alertBoxFlag=t},getSlavList:function(t,e){var i=!0,n=!1,r=void 0;try{for(var a,s=this.give_price_list[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var o=a.value;if(o.pkid==t)return console.log(o.slav_list),sessionStorage.setItem("slavList",JSON.stringify(o.slav_list)),void this.checkList(e)}}catch(l){n=!0,r=l}finally{try{i||null==s.return||s.return()}finally{if(n)throw r}}},chooseToWin:function(t,e){var i=this;this.$confirm('请确认是否将 "'+e+'" 选为中标单位?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["t"])(t).then((function(t){console.log(t),"1"===t.code?(i.getBillInfo(),i.getListDate(Number(sessionStorage.getItem("demandDetailsCurrentPage"))),i.$message({type:"success",message:"成功!"})):i.$message.error("網絡開小差了，稍後再試試吧！")}))})).catch((function(){i.$message({type:"info",message:"已取消"})}))},getListDate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=Number(e),sessionStorage.setItem("demandDetailsCurrentPage",this.currentPage);var i={bill_pkid:this.pkid,pageIndex:this.currentPage,pageSize:this.pageSize,sort_way:this.sortBy};Object(s["g"])(i).then((function(e){if("1"===e.code){t.give_price_list=[],t.total=e.t.row_total;var i=e.t.give_price_list;console.log(i),t.changeListData(i)}}))},changeListData:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.give_price_list.push(s)}}catch(o){i=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(i)throw n}}console.log(this.give_price_list)},getBillInfo:function(){var t=this;Object(s["a"])(this.pkid).then((function(e){"1"===e.code&&(t.billInfo=e.t),console.log(t.billInfo)}))},getExcelList:function(t){var e=[],i=1,n=!0,r=!1,a=void 0;try{for(var s,o=this.slav_list[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,c={a:i,b:l.part_doc_file?l.part_doc_file.file_origin_name:"其它",c:l.part_name,d:l.part_amunt||0,e:l.part_unit_price||0,f:l.part_price_sum||0};i++,e.push(c)}}catch(g){r=!0,a=g}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}console.log(this.billInfo);for(var f=t.recv_user,u=this.billInfo.send_user,d=this.billInfo,p=[{a:"",b:"",c:"",d:"",e:"",f:""},{a:"訂單信息：",b:"",c:"",d:"",e:"",f:""},{a:"交易類型",b:d.pd_type,c:"",d:"",e:"",f:""},{a:"交易法人",b:u.legal_person,c:"",d:"",e:"",f:""},{a:"交易地點",b:d.deliver_address,c:"",d:"",e:"",f:""},{a:"需求時間",b:d.deliver_date,c:"",d:"",e:"",f:""},{a:"交易幣別",b:d.money_type,c:"",d:"",e:"",f:""},{a:"",b:"",c:"",d:"",e:"",f:""},{a:"單位信息：",b:"",c:"",d:"",e:"",f:""},{a:"接單方",b:f.dept_name,c:"",d:"發單方(需求方)",e:u.dept_name,f:""},{a:"聯絡人",b:f.busis_mngr,c:"",d:"聯絡人",e:u.busis_mngr,f:""},{a:"移動電話",b:f.phone,c:"",d:"移動電話",e:u.phone,f:""},{a:"固定電話",b:f.tel,c:"",d:"固定電話",e:u.tel,f:""}],_=0,v=p;_<v.length;_++){var h=v[_];e.push(h)}this.excelList=e},exportExcel:function(){var t=this;i.e("chunk-1888e4ea").then(i.bind(null,"376b")).then((function(e){var i=["序號","零件名","零件名(接單方定義)","數量","單價("+t.billInfo.money_type+")","金額("+t.billInfo.money_type+")"],n=["a","b","c","d","e","f"],r=t.excelList,a=t.formatJson(n,r);e.export_json_to_excel({header:i,data:a,filename:t.billInfo.bill_no||"filename",autoWidth:t.autoWidth,bookType:t.bookType})}))},formatJson:function(t,e){return console.log(e.map((function(e){return t.map((function(t){return e[t]}))}))),e.map((function(e){return t.map((function(t){return e[t]}))}))}},components:{Paging:a["a"]},created:function(){this.pkid=this.$router.history.current.query.pkid;var t=Number(sessionStorage.getItem("demandDetailsCurrentPage"));t=t||1,this.getListDate(t),this.getBillInfo()},filters:{sortNameFormat:function(t){if(!t)return"";switch(t){case"complex":return"綜合排序";case"price":return"價格優先";case"date":return"時間優先"}}},watch:{sortBy:function(){this.getListDate()}}},l=o,c=(i("cdf0"),i("2877")),f=Object(c["a"])(l,n,r,!1,null,"69980708",null);e["default"]=f.exports},"37c8":function(t,e,i){e.f=i("2b4c")},"3a72":function(t,e,i){var n=i("7726"),r=i("8378"),a=i("2d00"),s=i("37c8"),o=i("86cc").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},"67ab":function(t,e,i){var n=i("ca5a")("meta"),r=i("d3f4"),a=i("69a8"),s=i("86cc").f,o=0,l=Object.isExtensible||function(){return!0},c=!i("79e5")((function(){return l(Object.preventExtensions({}))})),f=function(t){s(t,n,{value:{i:"O"+ ++o,w:{}}})},u=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[n].i},d=function(t,e){if(!a(t,n)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[n].w},p=function(t){return c&&_.NEED&&l(t)&&!a(t,n)&&f(t),t},_=t.exports={KEY:n,NEED:!1,fastKey:u,getWeak:d,onFreeze:p}},"7bbc":function(t,e,i){var n=i("6821"),r=i("9093").f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?o(t):r(n(t))}},"8a81":function(t,e,i){"use strict";var n=i("7726"),r=i("69a8"),a=i("9e1e"),s=i("5ca1"),o=i("2aba"),l=i("67ab").KEY,c=i("79e5"),f=i("5537"),u=i("7f20"),d=i("ca5a"),p=i("2b4c"),_=i("37c8"),v=i("3a72"),h=i("d4c0"),g=i("1169"),b=i("cb7c"),m=i("d3f4"),y=i("4bf8"),w=i("6821"),S=i("6a99"),x=i("4630"),k=i("2aeb"),I=i("7bbc"),A=i("11e9"),C=i("2621"),O=i("86cc"),B=i("0d58"),E=A.f,L=O.f,D=I.f,P=n.Symbol,j=n.JSON,F=j&&j.stringify,N="prototype",J=p("_hidden"),T=p("toPrimitive"),W={}.propertyIsEnumerable,M=f("symbol-registry"),z=f("symbols"),Y=f("op-symbols"),G=Object[N],K="function"==typeof P&&!!C.f,$=n.QObject,Q=!$||!$[N]||!$[N].findChild,Z=a&&c((function(){return 7!=k(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=E(G,e);n&&delete G[e],L(t,e,i),n&&t!==G&&L(G,e,n)}:L,R=function(t){var e=z[t]=k(P[N]);return e._k=t,e},V=K&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},q=function(t,e,i){return t===G&&q(Y,e,i),b(t),e=S(e,!0),b(i),r(z,e)?(i.enumerable?(r(t,J)&&t[J][e]&&(t[J][e]=!1),i=k(i,{enumerable:x(0,!1)})):(r(t,J)||L(t,J,x(1,{})),t[J][e]=!0),Z(t,e,i)):L(t,e,i)},U=function(t,e){b(t);var i,n=h(e=w(e)),r=0,a=n.length;while(a>r)q(t,i=n[r++],e[i]);return t},X=function(t,e){return void 0===e?k(t):U(k(t),e)},H=function(t){var e=W.call(this,t=S(t,!0));return!(this===G&&r(z,t)&&!r(Y,t))&&(!(e||!r(this,t)||!r(z,t)||r(this,J)&&this[J][t])||e)},tt=function(t,e){if(t=w(t),e=S(e,!0),t!==G||!r(z,e)||r(Y,e)){var i=E(t,e);return!i||!r(z,e)||r(t,J)&&t[J][e]||(i.enumerable=!0),i}},et=function(t){var e,i=D(w(t)),n=[],a=0;while(i.length>a)r(z,e=i[a++])||e==J||e==l||n.push(e);return n},it=function(t){var e,i=t===G,n=D(i?Y:w(t)),a=[],s=0;while(n.length>s)!r(z,e=n[s++])||i&&!r(G,e)||a.push(z[e]);return a};K||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===G&&e.call(Y,i),r(this,J)&&r(this[J],t)&&(this[J][t]=!1),Z(this,t,x(1,i))};return a&&Q&&Z(G,t,{configurable:!0,set:e}),R(t)},o(P[N],"toString",(function(){return this._k})),A.f=tt,O.f=q,i("9093").f=I.f=et,i("52a7").f=H,C.f=it,a&&!i("2d00")&&o(G,"propertyIsEnumerable",H,!0),_.f=function(t){return R(p(t))}),s(s.G+s.W+s.F*!K,{Symbol:P});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)p(nt[rt++]);for(var at=B(p.store),st=0;at.length>st;)v(at[st++]);s(s.S+s.F*!K,"Symbol",{for:function(t){return r(M,t+="")?M[t]:M[t]=P(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in M)if(M[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),s(s.S+s.F*!K,"Object",{create:X,defineProperty:q,defineProperties:U,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:it});var ot=c((function(){C.f(1)}));s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return C.f(y(t))}}),j&&s(s.S+s.F*(!K||c((function(){var t=P();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){var e,i,n=[t],r=1;while(arguments.length>r)n.push(arguments[r++]);if(i=e=n[1],(m(e)||void 0!==t)&&!V(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!V(e))return e}),n[1]=e,F.apply(j,n)}}),P[N][T]||i("32e9")(P[N],T,P[N].valueOf),u(P,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},ac4d:function(t,e,i){i("3a72")("asyncIterator")},cdf0:function(t,e,i){"use strict";var n=i("0229"),r=i.n(n);r.a},d4c0:function(t,e,i){var n=i("0d58"),r=i("2621"),a=i("52a7");t.exports=function(t){var e=n(t),i=r.f;if(i){var s,o=i(t),l=a.f,c=0;while(o.length>c)l.call(t,s=o[c++])&&e.push(s)}return e}}}]);
//# sourceMappingURL=chunk-944963f0.a693afa7.js.map